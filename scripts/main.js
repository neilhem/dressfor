"use strict";var patternConfig={categories:[{name:"forest",patterns:[{colors:[{name:"black",image:"01"}]},{colors:[{name:"red",image:"02_1"},{name:"yellow",image:"02_2"},{name:"green",image:"02_3"}]},{colors:[{name:"black",image:"03"}]},{colors:[{name:"black",image:"04"}]},{colors:[{name:"black",image:"05"}]},{colors:[{name:"yellow",image:"06_2"},{name:"green",image:"06_3"}]},{colors:[{name:"black",image:"07"}]},{colors:[{name:"red",image:"08_1"},{name:"yellow",image:"08_2"},{name:"green",image:"08_3"}]},{colors:[{name:"black",image:"09"}]},{colors:[{name:"yellow",image:"10_2"},{name:"green",image:"10_3"},{name:"black",image:"10_4"}]},{colors:[{name:"black",image:"11"}]},{colors:[{name:"black",image:"12_1"},{name:"yellow",image:"12_2"},{name:"green",image:"12_3"}]},{colors:[{name:"yellow",image:"13_2"},{name:"green",image:"13_3"}]},{colors:[{name:"black",image:"14"}]},{colors:[{name:"black",image:"15"}]},{colors:[{name:"black",image:"16"}]}]}]},userSelectedCat=!1;$(function(){$(".js-raty").raty({starOff:"/images/star-off.png",starOn:"/images/star-on.png"});new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:".swiper-pagination",autoplay:5e3,spaceBetween:30,effect:"fade",onSlideChangeEnd:function(a){}});$(".js-cat .dropdown-menu > li > a").on("click",function(a){a.preventDefault(),console.log(a),$(".js-cat .dropdown-menu > li").removeClass("active"),$(this).parent().addClass("active"),$(".js-cat-text").text($(this).text()),$(".js-cat-link").attr("href",$(this).attr("href"))})}),function(a,b){function c(){var a=new fabric.Image(document.getElementById("pattern"),{top:0,left:0}),b=new fabric.StaticCanvas;b.add(a);var c=new fabric.Pattern({source:function(){return b.setDimensions({width:a.getWidth(),height:a.getHeight()}),b.getElement()},repeat:"repeat"});f.add(new fabric.Polygon([{x:0,y:0},{x:f.width,y:0},{x:f.width,y:f.height},{x:0,y:f.height}],{left:0,top:0,fill:c}))}function d(a){g&&(g=!1,e.remove(e.getActiveObject()));var b=a,c=new fabric.Image(b,h);c.scaleToWidth(70),e.add(c)}if(a("#showImage").length){var e=new fabric.Canvas("pattern"),f=new fabric.StaticCanvas("showImage"),g=!0;e.backgroundColor="rgba(0,0,0,0)";var h={top:100,left:100,borderColor:"#bfbfbf",cornerColor:"#bfbfbf",cornerSize:6,lockUniScaling:!0};console.log(fabric),fabric.Image.fromURL("images/forest/pattern.png",function(a){a.scaleToWidth(265),e.add(a).setActiveObject(a),e.renderAll(),c()}),e.on("mouse:up",function(a){console.log(a.e.clientX,a.e.clientY),c()}),a(function(){var f=a(".pattern-list").data("index"),g=b.categories[f].name,h=b.categories[f].patterns;a.each(h,function(b,c){a(".pattern-list").append('<li><img src="images/'+g+"/patterns/"+c.colors[0].image+'.png" alt="">')}),a(".pattern-list > li > img").on("click",function(){d(this),c(e.toDataURL())})})}}(jQuery,patternConfig);